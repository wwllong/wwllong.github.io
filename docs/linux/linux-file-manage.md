# Linux文件权限管理

## 查看文件和目录的权限

使用 `ls –l name` 或者 `ll name` 指令可以显示文件或者目录的权限信息，它显示信息包括：文件类型、文件权限、文件的用户、文件的所属组、文件的大小、文件的创建时间、文件的名称。

如下：

```sh
-rwxr-xr-x 1 root root 32 May  9 15:00 hello.sh
```

| -rwxr-xr-x     | 1      | root         | root       | 32       | May  9 15:00       | hello.sh |
| -------------- | ------ | ------------ | ---------- | -------- | ------------------ | -------- |
| 文档类型及权限 | 连接数 | 文档所属用户 | 文档所属组 | 文档大小 | 文档最后被修改日期 | 文档名称 |

文档类型及权限解读：

| -               | rwx                          | r-x                                          | r-x                                      |
| --------------- | ---------------------------- | -------------------------------------------- | ---------------------------------------- |
| 文档类型        | 文档所有者权限（user）       | 文档所属用户组权限（group）                  | 其他用户权限（other）                    |
| -说明是普通文件 | 说明用户 root 有读写运行权限 | 表示用户组 root 有读和运行权限，没有写的权限 | 表示其他用户有读和运行权限，没有写的权限 |

- 文档类型以及权限：`d`表示目录，`l`表示软连接，`-`表示文件，`c`表示串行端口字符设备文件、`b`表示可供存储的块设备文件。余下的字符三个为一组，固定顺序为rwx，`r`：只读（read），`w`：可写（write），`x`：可执行（excute），而 `-`表示无此权限。
- 连接数：指有多少个文件指向同一个索引节点。
- 用户所在组权限：就是文档属于哪个用户和用户组。文件所属用户和组是可以更改的。
- 文档大小：默认是bytes



## 更改操作权限

### chown

chown是 change owner 的意思，主要作用就是改变文件或者目录所有者，所有者包含用户和用户组。

```sh
chown [-R] 用户名称 文件或者目录
chown [-R] 用户名称 用户组名称 文件或目录
```

- -R：进行递归式的权限更改，将目录下的所有文件、子目录更新为指定用户组权限

### chmod

chmod改变访问权限：

```shell
chmod [who] [+ | - | =] [mode] 文件名
```

- who : 表示操作对象可以是以下字母的一个或者组合

  - u：用户 user
  - g：用户组 group
  - o：表示其他用户
  - a：表示所有用户是系统默认的

- 操作符：

  - +：表示添加某个权限
  - -：表示取消某个权限
  - =：赋予给定的权限，取消文档以前的所有权限

- mode：表示可执行的权限，可以是 r、w、x

- 文件名：可以是空格分开的文件列表

  

## 数字设定法

也可以用数字来表示权限，数字设定法中数字表示的含义

- 0 表示没有任何权限
- 1 表示有可执行权限 = `x`
- 2 表示有可写权限 = `w`
- 4 表示有可读权限 = `r`

例如

```shell
chmod 755 file_name
```

| r w x           | r – x         | r - x         |
| :-------------- | :------------ | :------------ |
| 4 2 1 (4+2+1=7) | 4 - 1 (4+2=6) | 4 - 1 (4+1=5) |
| user            | group         | others        |

