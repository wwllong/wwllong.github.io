(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{876:function(t,a,s){"use strict";s.r(a);var e=s(58),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ubuntu-设置静态ip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-设置静态ip"}},[t._v("#")]),t._v(" Ubuntu 设置静态IP")]),t._v(" "),s("h2",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),s("p",[t._v("本教程记录Ubuntu各个版本的静态固定IP地址的设置。")]),t._v(" "),s("h2",{attrs:{id:"基础概念简述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础概念简述"}},[t._v("#")]),t._v(" 基础概念简述")]),t._v(" "),s("p",[t._v("这里作一些基础概念的简述，做一些了解。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://baike.baidu.com/item/DHCP/218195?fr=aladdin",target:"_blank",rel:"noopener noreferrer"}},[t._v("DHCP"),s("OutboundLink")],1),t._v(" ：动态主机分配协议，自动分配IP地址和网关等等（路由器提供），这种协议有租期和自动续约的概念，说明是不固定的。")]),t._v(" "),s("p",[t._v("IP地址：简单理解为PC的网络地址。")]),t._v(" "),s("p",[t._v("子网掩码：划分网段的范围。例如IP地址为192.168.121.1 ，子网掩码为 255.255.255.0 ，改机器可跟 254 的台机器在一个局域网。linux常用24来表示 255.255.255.0，表示从左往右有24个1。")]),t._v(" "),s("p",[t._v("网关：IP地址通过网关去联网，一般是交换机地址，交换机再通过路由器联网。")]),t._v(" "),s("h2",{attrs:{id:"查看网卡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看网卡"}},[t._v("#")]),t._v(" 查看网卡")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("wenwl@ubuntu:~$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" addr\nwenwl@ubuntu:~$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ifconfig")]),t._v("\n")])])]),s("h2",{attrs:{id:"修改配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[t._v("#")]),t._v(" 修改配置文件")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Ubuntu 16.x 和 Ubuntu 18.x：默认网卡的配置文件路径在 "),s("code",[t._v("/etc/netplan/50-cloud-init.yaml")]),t._v("。")])]),t._v(" "),s("li",[s("p",[t._v("Ubuntu 20.x ：默认网卡的配置文件路径依旧在"),s("code",[t._v("/etc/netplan/*.yaml")]),t._v("下，我见过的配置文件名称为 "),s("code",[t._v("50-cloud-init.yaml")]),t._v("或 "),s("code",[t._v("00-installer-config.yaml")]),t._v(", 可以通过查看内容是否是网卡配置文件：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("wenwl@ubuntu:~$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /etc/netplan/50-cloud-init.yaml\n")])])])])]),t._v(" "),s("p",[t._v("大家根据实际需要配置IP地址。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("wenwl@ubuntu:~$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/netplan/50-cloud-init.yaml\n")])])]),s("p",[t._v("假如要配置IP地址为192.168.1.100，子网掩码24位即255.255.255.0，网关设置为192.168.1.1，DNS配置为 223.5.5.5, 223.6.6.6（阿里云共用DNS），最后配置如下：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("network:\n    ethernets:\n        ens33: "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#配置的网卡的名称")]),t._v("\n            dhcp4: no "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#关闭DHCP，如果需要打开DHCP则写yes")]),t._v("\n            addresses: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.100/24"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#配置的静态ip地址和掩码")]),t._v("\n            optional: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n            gateway4: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.1 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#网关地址")]),t._v("\n            nameservers:\n                    addresses: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("223.5")]),t._v(".5.5, "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("223.6")]),t._v(".6.6"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#DNS服务器地址，多个DNS服务器地址需要用英文逗号分隔开")]),t._v("\n \n    version: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    renderer: networkd  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#指定后端采用systemd-networkd或者Network Manager，可不填写则默认使用systemd-workd")]),t._v("\n")])])]),s("h2",{attrs:{id:"应用配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用配置"}},[t._v("#")]),t._v(" 应用配置")]),t._v(" "),s("p",[t._v("在修改完配置文件后，输入以下指令应用新的网络配置：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("wenwl@ubuntu:~$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" netplan apply\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);