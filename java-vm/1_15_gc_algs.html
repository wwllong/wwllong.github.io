<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>垃圾回收算法 | 万隆的笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.png">
    <script>var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?d8c4de0636e24ecd74e706a345ab8cc9";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();</script>
    <meta name="description" content="小小码农">
    
    <link rel="preload" href="/assets/css/0.styles.e68661c4.css" as="style"><link rel="preload" href="/assets/js/app.bc037eca.js" as="script"><link rel="preload" href="/assets/js/3.a3373ef9.js" as="script"><link rel="preload" href="/assets/js/165.f904d36e.js" as="script"><link rel="prefetch" href="/assets/js/10.4df5c055.js"><link rel="prefetch" href="/assets/js/100.0d629d95.js"><link rel="prefetch" href="/assets/js/101.2db02bf9.js"><link rel="prefetch" href="/assets/js/102.d68c24bb.js"><link rel="prefetch" href="/assets/js/103.600018bb.js"><link rel="prefetch" href="/assets/js/104.c413414c.js"><link rel="prefetch" href="/assets/js/105.8c15211b.js"><link rel="prefetch" href="/assets/js/106.84e8ee9b.js"><link rel="prefetch" href="/assets/js/107.a9e7f4b2.js"><link rel="prefetch" href="/assets/js/108.f3285402.js"><link rel="prefetch" href="/assets/js/109.8cf78ec2.js"><link rel="prefetch" href="/assets/js/11.5acc5c3a.js"><link rel="prefetch" href="/assets/js/110.1822bed3.js"><link rel="prefetch" href="/assets/js/111.a9157b2f.js"><link rel="prefetch" href="/assets/js/112.f9617caf.js"><link rel="prefetch" href="/assets/js/113.2cf20d85.js"><link rel="prefetch" href="/assets/js/114.690001dc.js"><link rel="prefetch" href="/assets/js/115.01270cf8.js"><link rel="prefetch" href="/assets/js/116.f58bd27d.js"><link rel="prefetch" href="/assets/js/117.a7d22187.js"><link rel="prefetch" href="/assets/js/118.9b13fb7e.js"><link rel="prefetch" href="/assets/js/119.e56d4413.js"><link rel="prefetch" href="/assets/js/12.944e78c3.js"><link rel="prefetch" href="/assets/js/120.6a373e09.js"><link rel="prefetch" href="/assets/js/121.f05c8ac8.js"><link rel="prefetch" href="/assets/js/122.b23768d7.js"><link rel="prefetch" href="/assets/js/123.274a1455.js"><link rel="prefetch" href="/assets/js/124.1672408d.js"><link rel="prefetch" href="/assets/js/125.7fb88ab5.js"><link rel="prefetch" href="/assets/js/126.5db859c8.js"><link rel="prefetch" href="/assets/js/127.a34ecf8a.js"><link rel="prefetch" href="/assets/js/128.54e15d3c.js"><link rel="prefetch" href="/assets/js/129.6e2cae17.js"><link rel="prefetch" href="/assets/js/13.1d4ba2e8.js"><link rel="prefetch" href="/assets/js/130.6ad457a8.js"><link rel="prefetch" href="/assets/js/131.aeedef23.js"><link rel="prefetch" href="/assets/js/132.443d76bf.js"><link rel="prefetch" href="/assets/js/133.641d77af.js"><link rel="prefetch" href="/assets/js/134.1824a48c.js"><link rel="prefetch" href="/assets/js/135.bf659059.js"><link rel="prefetch" href="/assets/js/136.185d1de5.js"><link rel="prefetch" href="/assets/js/137.5bcb50d7.js"><link rel="prefetch" href="/assets/js/138.5b56d765.js"><link rel="prefetch" href="/assets/js/139.4f07d83f.js"><link rel="prefetch" href="/assets/js/14.78c03a65.js"><link rel="prefetch" href="/assets/js/140.b14458e8.js"><link rel="prefetch" href="/assets/js/141.16eba01d.js"><link rel="prefetch" href="/assets/js/142.67697a4e.js"><link rel="prefetch" href="/assets/js/143.b1ee0e16.js"><link rel="prefetch" href="/assets/js/144.9800e31a.js"><link rel="prefetch" href="/assets/js/145.cdd7e47e.js"><link rel="prefetch" href="/assets/js/146.4d8b9cf6.js"><link rel="prefetch" href="/assets/js/147.1ce23cab.js"><link rel="prefetch" href="/assets/js/148.854fb1e4.js"><link rel="prefetch" href="/assets/js/149.da169cf3.js"><link rel="prefetch" href="/assets/js/15.a60df2b4.js"><link rel="prefetch" href="/assets/js/150.b3d06f97.js"><link rel="prefetch" href="/assets/js/151.16f22697.js"><link rel="prefetch" href="/assets/js/152.e39ae535.js"><link rel="prefetch" href="/assets/js/153.81ecd116.js"><link rel="prefetch" href="/assets/js/154.cbc5938f.js"><link rel="prefetch" href="/assets/js/155.00385d0c.js"><link rel="prefetch" href="/assets/js/156.4517568a.js"><link rel="prefetch" href="/assets/js/157.f1433c46.js"><link rel="prefetch" href="/assets/js/158.5352cd07.js"><link rel="prefetch" href="/assets/js/159.c4f81687.js"><link rel="prefetch" href="/assets/js/16.da7f7410.js"><link rel="prefetch" href="/assets/js/160.3778e817.js"><link rel="prefetch" href="/assets/js/161.4ecebe00.js"><link rel="prefetch" href="/assets/js/162.261c214f.js"><link rel="prefetch" href="/assets/js/163.e7abb47f.js"><link rel="prefetch" href="/assets/js/164.570dd314.js"><link rel="prefetch" href="/assets/js/166.be1e5538.js"><link rel="prefetch" href="/assets/js/167.eca75917.js"><link rel="prefetch" href="/assets/js/168.5ede7a24.js"><link rel="prefetch" href="/assets/js/169.8f030b14.js"><link rel="prefetch" href="/assets/js/17.ba9ee66f.js"><link rel="prefetch" href="/assets/js/170.5b3d76ad.js"><link rel="prefetch" href="/assets/js/171.d6534d74.js"><link rel="prefetch" href="/assets/js/172.8cfd94b9.js"><link rel="prefetch" href="/assets/js/173.fb4f0904.js"><link rel="prefetch" href="/assets/js/174.7dba6bb9.js"><link rel="prefetch" href="/assets/js/175.c6c8980d.js"><link rel="prefetch" href="/assets/js/176.5c8bee1e.js"><link rel="prefetch" href="/assets/js/177.7d9b6b50.js"><link rel="prefetch" href="/assets/js/178.9b0f6d6b.js"><link rel="prefetch" href="/assets/js/179.851f4874.js"><link rel="prefetch" href="/assets/js/18.68e82e56.js"><link rel="prefetch" href="/assets/js/180.d4946561.js"><link rel="prefetch" href="/assets/js/181.dddb9217.js"><link rel="prefetch" href="/assets/js/182.179b516a.js"><link rel="prefetch" href="/assets/js/183.f6c78374.js"><link rel="prefetch" href="/assets/js/184.1dde444f.js"><link rel="prefetch" href="/assets/js/185.3db3afc3.js"><link rel="prefetch" href="/assets/js/186.2c0f07eb.js"><link rel="prefetch" href="/assets/js/187.5f6f57ff.js"><link rel="prefetch" href="/assets/js/188.97586f9f.js"><link rel="prefetch" href="/assets/js/189.8a39dde2.js"><link rel="prefetch" href="/assets/js/19.9aa6dcce.js"><link rel="prefetch" href="/assets/js/190.96731259.js"><link rel="prefetch" href="/assets/js/191.d096d222.js"><link rel="prefetch" href="/assets/js/192.a921d348.js"><link rel="prefetch" href="/assets/js/193.a3e07c61.js"><link rel="prefetch" href="/assets/js/194.8934403d.js"><link rel="prefetch" href="/assets/js/195.13b302ff.js"><link rel="prefetch" href="/assets/js/196.4ad81cf9.js"><link rel="prefetch" href="/assets/js/197.8a23e1be.js"><link rel="prefetch" href="/assets/js/198.a1bf2bc3.js"><link rel="prefetch" href="/assets/js/199.c6abf07d.js"><link rel="prefetch" href="/assets/js/2.98bbb7f5.js"><link rel="prefetch" href="/assets/js/20.513c8e9b.js"><link rel="prefetch" href="/assets/js/200.f5a2f491.js"><link rel="prefetch" href="/assets/js/201.03671056.js"><link rel="prefetch" href="/assets/js/202.f94ec544.js"><link rel="prefetch" href="/assets/js/203.2a09fec0.js"><link rel="prefetch" href="/assets/js/204.e56dddcb.js"><link rel="prefetch" href="/assets/js/205.f48c8602.js"><link rel="prefetch" href="/assets/js/206.a8d9bcc4.js"><link rel="prefetch" href="/assets/js/207.e4016538.js"><link rel="prefetch" href="/assets/js/208.be8af315.js"><link rel="prefetch" href="/assets/js/209.4cfde3a6.js"><link rel="prefetch" href="/assets/js/21.1e72e195.js"><link rel="prefetch" href="/assets/js/210.f4936cb6.js"><link rel="prefetch" href="/assets/js/211.063bdacd.js"><link rel="prefetch" href="/assets/js/212.353d50f2.js"><link rel="prefetch" href="/assets/js/213.094a5cfc.js"><link rel="prefetch" href="/assets/js/214.d16aa2d2.js"><link rel="prefetch" href="/assets/js/215.bc88e375.js"><link rel="prefetch" href="/assets/js/216.45511649.js"><link rel="prefetch" href="/assets/js/217.99946f6f.js"><link rel="prefetch" href="/assets/js/218.43a39089.js"><link rel="prefetch" href="/assets/js/219.d14424be.js"><link rel="prefetch" href="/assets/js/22.324c39b4.js"><link rel="prefetch" href="/assets/js/220.882e9a86.js"><link rel="prefetch" href="/assets/js/221.40e3d13e.js"><link rel="prefetch" href="/assets/js/222.23004b98.js"><link rel="prefetch" href="/assets/js/223.5130614a.js"><link rel="prefetch" href="/assets/js/224.2a560c15.js"><link rel="prefetch" href="/assets/js/225.92cc9d19.js"><link rel="prefetch" href="/assets/js/226.38630a69.js"><link rel="prefetch" href="/assets/js/227.ddd1a6d3.js"><link rel="prefetch" href="/assets/js/228.2d4cf247.js"><link rel="prefetch" href="/assets/js/229.458c49c4.js"><link rel="prefetch" href="/assets/js/23.beabd1c9.js"><link rel="prefetch" href="/assets/js/230.1530afe6.js"><link rel="prefetch" href="/assets/js/231.26875105.js"><link rel="prefetch" href="/assets/js/232.3c906b6a.js"><link rel="prefetch" href="/assets/js/233.d633d2c5.js"><link rel="prefetch" href="/assets/js/234.841291f0.js"><link rel="prefetch" href="/assets/js/235.de892702.js"><link rel="prefetch" href="/assets/js/236.a0ff8c56.js"><link rel="prefetch" href="/assets/js/237.bbc7b6ef.js"><link rel="prefetch" href="/assets/js/238.b53d8e52.js"><link rel="prefetch" href="/assets/js/239.ae488c24.js"><link rel="prefetch" href="/assets/js/24.a2f1a1cf.js"><link rel="prefetch" href="/assets/js/240.06d1aa99.js"><link rel="prefetch" href="/assets/js/241.e782f534.js"><link rel="prefetch" href="/assets/js/242.cae48a9d.js"><link rel="prefetch" href="/assets/js/243.4eea58f3.js"><link rel="prefetch" href="/assets/js/244.b3cfbb67.js"><link rel="prefetch" href="/assets/js/245.734f2b40.js"><link rel="prefetch" href="/assets/js/246.83ba6a01.js"><link rel="prefetch" href="/assets/js/247.bee3fa17.js"><link rel="prefetch" href="/assets/js/248.633a3a01.js"><link rel="prefetch" href="/assets/js/249.cbcc1465.js"><link rel="prefetch" href="/assets/js/25.1598a580.js"><link rel="prefetch" href="/assets/js/250.7b21393b.js"><link rel="prefetch" href="/assets/js/251.2fb1b244.js"><link rel="prefetch" href="/assets/js/252.c0e95582.js"><link rel="prefetch" href="/assets/js/253.42d96179.js"><link rel="prefetch" href="/assets/js/254.2f556423.js"><link rel="prefetch" href="/assets/js/255.5c518629.js"><link rel="prefetch" href="/assets/js/256.6c37f138.js"><link rel="prefetch" href="/assets/js/257.bfaf2b90.js"><link rel="prefetch" href="/assets/js/258.501c8dec.js"><link rel="prefetch" href="/assets/js/259.433c5a35.js"><link rel="prefetch" href="/assets/js/26.14532494.js"><link rel="prefetch" href="/assets/js/260.7133674c.js"><link rel="prefetch" href="/assets/js/261.7c497a98.js"><link rel="prefetch" href="/assets/js/262.ef906292.js"><link rel="prefetch" href="/assets/js/263.7b1b901f.js"><link rel="prefetch" href="/assets/js/264.36ebfc79.js"><link rel="prefetch" href="/assets/js/265.33897322.js"><link rel="prefetch" href="/assets/js/266.8670f739.js"><link rel="prefetch" href="/assets/js/267.ec8f4c6a.js"><link rel="prefetch" href="/assets/js/268.487e3ecf.js"><link rel="prefetch" href="/assets/js/269.dd269c27.js"><link rel="prefetch" href="/assets/js/27.182ae611.js"><link rel="prefetch" href="/assets/js/270.bfc37c9e.js"><link rel="prefetch" href="/assets/js/271.b1193de2.js"><link rel="prefetch" href="/assets/js/272.4d22dbda.js"><link rel="prefetch" href="/assets/js/273.f76b57ca.js"><link rel="prefetch" href="/assets/js/274.8aa70460.js"><link rel="prefetch" href="/assets/js/275.f8a4d784.js"><link rel="prefetch" href="/assets/js/276.73193b56.js"><link rel="prefetch" href="/assets/js/277.eb11f3ab.js"><link rel="prefetch" href="/assets/js/278.bbbd0f67.js"><link rel="prefetch" href="/assets/js/279.0d5be41f.js"><link rel="prefetch" href="/assets/js/28.cc74fb69.js"><link rel="prefetch" href="/assets/js/280.e937fced.js"><link rel="prefetch" href="/assets/js/281.3e4a2290.js"><link rel="prefetch" href="/assets/js/282.927224e7.js"><link rel="prefetch" href="/assets/js/283.11981dd7.js"><link rel="prefetch" href="/assets/js/284.f51d8c6d.js"><link rel="prefetch" href="/assets/js/285.36e1d9fd.js"><link rel="prefetch" href="/assets/js/286.6ae62cc1.js"><link rel="prefetch" href="/assets/js/287.83708e55.js"><link rel="prefetch" href="/assets/js/288.bae95807.js"><link rel="prefetch" href="/assets/js/289.96cf6017.js"><link rel="prefetch" href="/assets/js/29.e3df47e0.js"><link rel="prefetch" href="/assets/js/290.c8bbd938.js"><link rel="prefetch" href="/assets/js/291.ee2a4137.js"><link rel="prefetch" href="/assets/js/292.37a36b48.js"><link rel="prefetch" href="/assets/js/293.6589f01f.js"><link rel="prefetch" href="/assets/js/294.9e2c7ac2.js"><link rel="prefetch" href="/assets/js/295.54f91c63.js"><link rel="prefetch" href="/assets/js/296.437948b8.js"><link rel="prefetch" href="/assets/js/297.77b67b30.js"><link rel="prefetch" href="/assets/js/298.847026f8.js"><link rel="prefetch" href="/assets/js/299.f7987fa5.js"><link rel="prefetch" href="/assets/js/30.d956a42b.js"><link rel="prefetch" href="/assets/js/300.fb926d10.js"><link rel="prefetch" href="/assets/js/301.39be1acb.js"><link rel="prefetch" href="/assets/js/302.0d4b2462.js"><link rel="prefetch" href="/assets/js/303.797685f0.js"><link rel="prefetch" href="/assets/js/304.953dd6d8.js"><link rel="prefetch" href="/assets/js/305.45a68780.js"><link rel="prefetch" href="/assets/js/306.9436c9f7.js"><link rel="prefetch" href="/assets/js/307.c8da713f.js"><link rel="prefetch" href="/assets/js/308.42164c3a.js"><link rel="prefetch" href="/assets/js/309.08138204.js"><link rel="prefetch" href="/assets/js/31.b08efb45.js"><link rel="prefetch" href="/assets/js/310.3bdab8a3.js"><link rel="prefetch" href="/assets/js/311.6cb6bc2c.js"><link rel="prefetch" href="/assets/js/312.b2211997.js"><link rel="prefetch" href="/assets/js/313.27e5d88b.js"><link rel="prefetch" href="/assets/js/314.4345463c.js"><link rel="prefetch" href="/assets/js/315.cfd666b9.js"><link rel="prefetch" href="/assets/js/316.744f1ea3.js"><link rel="prefetch" href="/assets/js/317.0a990397.js"><link rel="prefetch" href="/assets/js/318.49bfe4f7.js"><link rel="prefetch" href="/assets/js/319.0e9f0404.js"><link rel="prefetch" href="/assets/js/32.42eb6c80.js"><link rel="prefetch" href="/assets/js/320.95c40fa6.js"><link rel="prefetch" href="/assets/js/321.d3557402.js"><link rel="prefetch" href="/assets/js/322.381f65d0.js"><link rel="prefetch" href="/assets/js/323.883198dc.js"><link rel="prefetch" href="/assets/js/324.cad6119f.js"><link rel="prefetch" href="/assets/js/325.90509c04.js"><link rel="prefetch" href="/assets/js/33.cba29bcc.js"><link rel="prefetch" href="/assets/js/34.60629bfe.js"><link rel="prefetch" href="/assets/js/35.a60b566c.js"><link rel="prefetch" href="/assets/js/36.099489dc.js"><link rel="prefetch" href="/assets/js/37.a40ed816.js"><link rel="prefetch" href="/assets/js/38.7e946531.js"><link rel="prefetch" href="/assets/js/39.1e9449ed.js"><link rel="prefetch" href="/assets/js/4.0893bcb9.js"><link rel="prefetch" href="/assets/js/40.a68e55dd.js"><link rel="prefetch" href="/assets/js/41.c2410ec6.js"><link rel="prefetch" href="/assets/js/42.6059e0a0.js"><link rel="prefetch" href="/assets/js/43.666eab60.js"><link rel="prefetch" href="/assets/js/44.6d2bc28e.js"><link rel="prefetch" href="/assets/js/45.23095742.js"><link rel="prefetch" href="/assets/js/46.2c644d05.js"><link rel="prefetch" href="/assets/js/47.0c53d023.js"><link rel="prefetch" href="/assets/js/48.6763315e.js"><link rel="prefetch" href="/assets/js/49.5df08a8b.js"><link rel="prefetch" href="/assets/js/5.0c8b00ed.js"><link rel="prefetch" href="/assets/js/50.21bed711.js"><link rel="prefetch" href="/assets/js/51.cc283ef4.js"><link rel="prefetch" href="/assets/js/52.448e1e19.js"><link rel="prefetch" href="/assets/js/53.8d139bfe.js"><link rel="prefetch" href="/assets/js/54.ab823596.js"><link rel="prefetch" href="/assets/js/55.28d6b882.js"><link rel="prefetch" href="/assets/js/56.799dfc32.js"><link rel="prefetch" href="/assets/js/57.47844017.js"><link rel="prefetch" href="/assets/js/58.a3636228.js"><link rel="prefetch" href="/assets/js/59.b88e34c1.js"><link rel="prefetch" href="/assets/js/6.a436075e.js"><link rel="prefetch" href="/assets/js/60.08d9b769.js"><link rel="prefetch" href="/assets/js/61.62eaaae6.js"><link rel="prefetch" href="/assets/js/62.2e8a878d.js"><link rel="prefetch" href="/assets/js/63.498c3cfe.js"><link rel="prefetch" href="/assets/js/64.32bf8090.js"><link rel="prefetch" href="/assets/js/65.0f690d46.js"><link rel="prefetch" href="/assets/js/66.90352622.js"><link rel="prefetch" href="/assets/js/67.480bdaa6.js"><link rel="prefetch" href="/assets/js/68.9979d713.js"><link rel="prefetch" href="/assets/js/69.780f4d95.js"><link rel="prefetch" href="/assets/js/7.4d9f4e60.js"><link rel="prefetch" href="/assets/js/70.c2ca172c.js"><link rel="prefetch" href="/assets/js/71.ae3f1c72.js"><link rel="prefetch" href="/assets/js/72.93cde0ad.js"><link rel="prefetch" href="/assets/js/73.8ee7e6cc.js"><link rel="prefetch" href="/assets/js/74.cde76b4d.js"><link rel="prefetch" href="/assets/js/75.1f2c3f1d.js"><link rel="prefetch" href="/assets/js/76.960c7d73.js"><link rel="prefetch" href="/assets/js/77.9d4b9659.js"><link rel="prefetch" href="/assets/js/78.310cf545.js"><link rel="prefetch" href="/assets/js/79.bd667333.js"><link rel="prefetch" href="/assets/js/8.7541ba14.js"><link rel="prefetch" href="/assets/js/80.f42edee8.js"><link rel="prefetch" href="/assets/js/81.dda99508.js"><link rel="prefetch" href="/assets/js/82.ec338e99.js"><link rel="prefetch" href="/assets/js/83.66b1f5b4.js"><link rel="prefetch" href="/assets/js/84.2173e568.js"><link rel="prefetch" href="/assets/js/85.3b5e4e47.js"><link rel="prefetch" href="/assets/js/86.3c179528.js"><link rel="prefetch" href="/assets/js/87.28691828.js"><link rel="prefetch" href="/assets/js/88.5830058a.js"><link rel="prefetch" href="/assets/js/89.2e630253.js"><link rel="prefetch" href="/assets/js/9.038ee2be.js"><link rel="prefetch" href="/assets/js/90.05aa65c3.js"><link rel="prefetch" href="/assets/js/91.99ac4500.js"><link rel="prefetch" href="/assets/js/92.f1bd8f70.js"><link rel="prefetch" href="/assets/js/93.f35f7adf.js"><link rel="prefetch" href="/assets/js/94.f6780083.js"><link rel="prefetch" href="/assets/js/95.be362a29.js"><link rel="prefetch" href="/assets/js/96.f8368d2d.js"><link rel="prefetch" href="/assets/js/97.745204bf.js"><link rel="prefetch" href="/assets/js/98.58c8fcaa.js"><link rel="prefetch" href="/assets/js/99.d4d25887.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e68661c4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.png" alt="万隆的笔记" class="logo"> <span class="site-name can-hide">万隆的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes-guide/" class="nav-link">
  博文索引
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="在线资源" class="dropdown-title"><span class="title">在线资源</span> <span class="arrow down"></span></button> <button type="button" aria-label="在线资源" class="mobile-dropdown-title"><span class="title">在线资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线学站
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://www.runoob.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  菜鸟教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.w3cschool.cn/tutorial" target="_blank" rel="noopener noreferrer" class="nav-link external">
  入门教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.coursera.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Coursera
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线文档
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://www.w3school.com.cn/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  w3school
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.bootcss.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bootstrap
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  tool 工具集
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.bejson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  bejson 工具集
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://smallpdf.com/cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  文档转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><!----> <a href="/online/" class="nav-link">
  更多在线资源
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/change-logs/" class="nav-link">
  Changlog
</a></li><li class="dropdown-item"><!----> <a href="/more/about-me.html" class="nav-link">
  Aboutme
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wwllong" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes-guide/" class="nav-link">
  博文索引
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="在线资源" class="dropdown-title"><span class="title">在线资源</span> <span class="arrow down"></span></button> <button type="button" aria-label="在线资源" class="mobile-dropdown-title"><span class="title">在线资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线学站
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://www.runoob.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  菜鸟教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.w3cschool.cn/tutorial" target="_blank" rel="noopener noreferrer" class="nav-link external">
  入门教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.coursera.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Coursera
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线文档
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://www.w3school.com.cn/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  w3school
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.bootcss.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bootstrap
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  tool 工具集
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.bejson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  bejson 工具集
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://smallpdf.com/cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  文档转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><!----> <a href="/online/" class="nav-link">
  更多在线资源
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/change-logs/" class="nav-link">
  Changlog
</a></li><li class="dropdown-item"><!----> <a href="/more/about-me.html" class="nav-link">
  Aboutme
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wwllong" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java虚拟机</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-vm/" aria-current="page" class="sidebar-link">大纲</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>走近Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-vm/0_1_foreword.html" class="sidebar-link">JVM前言</a></li><li><a href="/java-vm/0_2_java_jvm_introd.html" class="sidebar-link">Java与JVM简介</a></li><li><a href="/java-vm/0_3_jvm_framework.html" class="sidebar-link">JVM架构模型</a></li><li><a href="/java-vm/0_4_jvm_life_cycle.html" class="sidebar-link">JVM生命周期</a></li><li><a href="/java-vm/0_5_java_histroy.html" class="sidebar-link">Java的发展重大事件</a></li><li><a href="/java-vm/0_6_jvm_family.html" class="sidebar-link">JVM家族</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>内存与垃圾回收</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-vm/1_1_memory_structure.html" class="sidebar-link">JVM内存结构图</a></li><li><a href="/java-vm/1_2_class_loading_sys.html" class="sidebar-link">类加载器子系统</a></li><li><a href="/java-vm/1_3_runtime_data_area_ov.html" class="sidebar-link">运行时数据区</a></li><li><a href="/java-vm/1_4_pc_register.html" class="sidebar-link">程序计数器（PC寄存器）</a></li><li><a href="/java-vm/1_5_vm_statck.html" class="sidebar-link">虚拟机栈</a></li><li><a href="/java-vm/1_6_native_method_stack.html" class="sidebar-link">本地方法栈</a></li><li><a href="/java-vm/1_7_heap.html" class="sidebar-link">堆</a></li><li><a href="/java-vm/1_8_methods_area.html" class="sidebar-link">方法区</a></li><li><a href="/java-vm/1_8_1_methods_area.html" class="sidebar-link">- 方法区使用举例图解</a></li><li><a href="/java-vm/1_9_new_object.html" class="sidebar-link">对象的实例化</a></li><li><a href="/java-vm/1_10_direct_memory.html" class="sidebar-link">直接内存</a></li><li><a href="/java-vm/1_11_execution_engine.html" class="sidebar-link">执行引擎</a></li><li><a href="/java-vm/1_12_string_table.html" class="sidebar-link">String Table</a></li><li><a href="/java-vm/1_13_gc_introd.html" class="sidebar-link">垃圾回收概述</a></li><li><a href="/java-vm/1_14_gc_concept.html" class="sidebar-link">垃圾回收相关概念</a></li><li><a href="/java-vm/1_15_gc_algs.html" aria-current="page" class="active sidebar-link">垃圾回收算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#垃圾回收算法" class="sidebar-link">垃圾回收算法</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#标记阶段-引用计数算法" class="sidebar-link">标记阶段：引用计数算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#循环引用" class="sidebar-link">循环引用</a></li></ul></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#标记阶段-可达性分析算法" class="sidebar-link">标记阶段：可达性分析算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#基本思路" class="sidebar-link">基本思路</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#gc-roots" class="sidebar-link">GC Roots</a></li></ul></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#对象的finalization机制" class="sidebar-link">对象的finalization机制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#生存还是死亡" class="sidebar-link">生存还是死亡</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#具体过程" class="sidebar-link">具体过程</a></li></ul></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#mat与jprofiler的gc-roots溯源" class="sidebar-link">MAT与JProfiler的GC Roots溯源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#mat-概述" class="sidebar-link">MAT 概述</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#获取dump文件" class="sidebar-link">获取dump文件</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#使用mat打开dump文件" class="sidebar-link">使用MAT打开Dump文件</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#jprofiler的gc-roots溯源" class="sidebar-link">JProfiler的GC Roots溯源</a></li></ul></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#清除阶段-标记-清除算法" class="sidebar-link">清除阶段：标记-清除算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#执行过程" class="sidebar-link">执行过程</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#空闲列表-free-list" class="sidebar-link">空闲列表（Free List）</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#优缺点" class="sidebar-link">优缺点</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#何为清除" class="sidebar-link">何为清除</a></li></ul></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#清除阶段-复制算法" class="sidebar-link">清除阶段：复制算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#核心思想" class="sidebar-link">核心思想</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#优缺点-2" class="sidebar-link">优缺点</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#应用场景" class="sidebar-link">应用场景</a></li></ul></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#清除阶段-标记-压缩-整理-算法" class="sidebar-link">清除阶段：标记-压缩（整理）算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#执行过程-2" class="sidebar-link">执行过程</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#指针碰撞-bump-the-pointer" class="sidebar-link">指针碰撞（Bump the Pointer）</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#优缺点-3" class="sidebar-link">优缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#小结" class="sidebar-link">小结</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#分代收集算法" class="sidebar-link">分代收集算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#年轻代-young-gen" class="sidebar-link">年轻代（Young Gen）</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#老年代-tenured-gen" class="sidebar-link">老年代（Tenured Gen）</a></li></ul></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#增量收集算法" class="sidebar-link">增量收集算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#基本思想" class="sidebar-link">基本思想</a></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#优缺点-4" class="sidebar-link">优缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/java-vm/1_15_gc_algs.html#分区算法" class="sidebar-link">分区算法</a></li></ul></li><li><a href="/java-vm/1_16_gc_collector.html" class="sidebar-link">垃圾收集器</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>字节码与类加载</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-vm/2_1_class_sys_introd.html" class="sidebar-link">JVM基石：class文件</a></li><li><a href="/java-vm/2_2_class_file_struct.html" class="sidebar-link">class文件结构</a></li><li><a href="/java-vm/2_2_1_class_file_javap.html" class="sidebar-link">javap解析class文件</a></li><li><a href="/java-vm/2_3_bytecode_instruction_set.html" class="sidebar-link">字节码指令集</a></li><li><a href="/java-vm/2_4_class_loading_process.html" class="sidebar-link">类加载过程（类生命周期）</a></li><li><a href="/java-vm/2_5_class_loader.html" class="sidebar-link">再谈类的加载器</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>性能监控与调优</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-vm/3_1_tuning_introd.html" class="sidebar-link">概述</a></li><li><a href="/java-vm/3_2_tuning_command.html" class="sidebar-link">JVM监控及诊断工具-命令行篇</a></li><li><a href="/java-vm/3_3_tuning_gui.html" class="sidebar-link">JVM监控及诊断工具-GUI篇</a></li><li><a href="/java-vm/3_4_tuning_vmparam.html" class="sidebar-link">JVM运行时参数</a></li><li><a href="/java-vm/1_17_gc_log.html" class="sidebar-link">GC日志分析</a></li><li><a href="/java-vm/3_6_tuning_heap_shallow_retained.html" class="sidebar-link">浅堆深堆与支配树</a></li><li><a href="/java-vm/3_8_tuning_heap_leak_overflow.html" class="sidebar-link">内存泄漏与内存溢出</a></li><li><a href="/java-vm/3_7_tuning_qql.html" class="sidebar-link">QQL语言查询对象信息</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>监控与性能调优案例</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-vm/3_tuning_case0_introd.html" class="sidebar-link">概述</a></li><li><a href="/java-vm/3_tuning_case0_tomcat_hoom.html" class="sidebar-link">Tomcat堆溢出分析</a></li><li><a href="/java-vm/3_tuning_case1_heap_oom.html" class="sidebar-link">堆溢出</a></li><li><a href="/java-vm/3_tuning_case2_method_oom.html" class="sidebar-link">方法区溢出</a></li><li><a href="/java-vm/3_tuning_case3_limit_exceeded.html" class="sidebar-link">GC overhead limit exceeded</a></li><li><a href="/java-vm/3_tuning_case4_thread_oom.html" class="sidebar-link">线程溢出</a></li><li><a href="/java-vm/3_tuning_perf_case1_tps.html" class="sidebar-link">调整堆大小提高服务的吞吐量</a></li><li><a href="/java-vm/3_tuning_perf_case2_jit.html" class="sidebar-link">JVM优化之JIT优化</a></li><li><a href="/java-vm/3_tuning_perf_case3_heapsize.html" class="sidebar-link">合理配置堆内存</a></li><li><a href="/java-vm/3_tuning_perf_case4_cpu_hight.html" class="sidebar-link">CPU占用很高排查方案</a></li><li><a href="/java-vm/3_tuning_perf_case5_g1.html" class="sidebar-link">G1并发执行的线程数对性能的影响</a></li><li><a href="/java-vm/3_tuning_perf_case6_gcc.html" class="sidebar-link">调整垃圾回收器提高服务的吞吐量</a></li><li><a href="/java-vm/3_tuning_perf_case7_millions4orders.html" class="sidebar-link">日均百万级订单交易系统如何设置JVM参数</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="垃圾回收算法"><a href="#垃圾回收算法" class="header-anchor">#</a> 垃圾回收算法</h2> <p>堆是GC的重点区域。在堆里存放着几乎所有的Java对象实例，在GC执行垃圾回收之前，首先需要<strong>区分出内存中哪些是存活对象，哪些是已经死亡的对象</strong>。只有被标记为己经死亡的对象，GC才会在执行垃圾回收时，释放掉其所占用的内存空间，因此这个过程我们可以称为<strong>垃圾标记阶段</strong>。</p> <p>那么在JVM中究竟是如何标记一个死亡对象呢？</p> <p>简单来说，<strong>当一个对象已经不再被任何的存活对象继续引用时，就可以宣判为已经死亡</strong>。</p> <p>判断对象存活一般有两种方式：<strong>引用计数算法</strong>和<strong>可达性分析算法</strong>。</p> <h2 id="标记阶段-引用计数算法"><a href="#标记阶段-引用计数算法" class="header-anchor">#</a> 标记阶段：引用计数算法</h2> <p>引用计数算法（Reference Counting）比较简单，<strong>对每个对象保存一个整型的引用计数器属性，用于记录对象被引用的情况</strong>。</p> <p>对于一个对象A，只要有任何一个对象引用了A，则A的引用计数器就加1；当引用失效时，引用计数器就减1。只要对象A的引用计数器的值为0，即表示对象A不可能再被使用，可进行回收。</p> <p>优点：<strong>实现简单，垃圾对象便于辨识；判定效率高，回收没有延迟性</strong>。</p> <p>缺点：</p> <ul><li>它需要单独的字段存储计数器，这样的做法增加了<strong>存储空间的开销</strong>。</li> <li>每次赋值都需要更新计数器，伴随着加法和减法操作，这增加了<strong>时间开销</strong>。</li> <li>引用计数器有一个严重的问题，即<strong>无法处理循环引用的情况</strong>。这是一条致命缺陷，导致在<strong>Java的垃圾回收器中没有使用这类算法</strong>（所以Java不存在这种类型的内存泄漏）。</li></ul> <h3 id="循环引用"><a href="#循环引用" class="header-anchor">#</a> 循环引用</h3> <p>当p的指针断开的时候，内部的引用形成一个循环，这就是循环引用。</p> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_1.png" alt="gc_algs_1"></p> <p>举例，测试Java中是否采用的是引用计数算法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RefCountGC</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这个成员属性的唯一作用就是占用一点内存</span>
    <span class="token keyword">private</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bigSize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token operator">*</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 引用</span>
    <span class="token class-name">Object</span> reference <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RefCountGC</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RefCountGC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RefCountGC</span> obj2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RefCountGC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        obj1<span class="token punctuation">.</span>reference <span class="token operator">=</span> obj2<span class="token punctuation">;</span>
        obj2<span class="token punctuation">.</span>reference <span class="token operator">=</span> obj1<span class="token punctuation">;</span>
        
        obj1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        obj2 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">// 显示的执行垃圾收集行为</span>
        <span class="token comment">// 这里发生GC，obj1和obj2是否被回收？</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 运行结果</span>
<span class="token class-name">PSYoungGen</span><span class="token operator">:</span> <span class="token number">15490</span>K<span class="token operator">-&gt;</span><span class="token function">808K</span><span class="token punctuation">(</span><span class="token number">76288</span>K<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token number">15490</span>K<span class="token operator">-&gt;</span><span class="token function">816K</span><span class="token punctuation">(</span><span class="token number">251392</span>K<span class="token punctuation">)</span>
</code></pre></div><p>上述代码进行了GC收集的行为，所以可以证明JVM中采用的不是引用计数器的算法。</p> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_2.png" alt="gc_algs_2"></p> <p><strong>小结</strong></p> <p>引用计数算法是很多语言的资源回收的选择，例如因人工智能而更加火热的<code>Python</code>，它更是同时支持引用计数和垃圾收集机制。</p> <p>具体哪种最优是要看场景的，业界有大规模实践中仅保留引用计数机制，以提高<strong>吞吐量</strong>的尝试。</p> <p>Java并没有选择引用计数，是因为其存在一个基本的难题，也就是很难处理循环引用关系。</p> <p>Python如何解决循环引用？</p> <ul><li>手动解除：很好理解，就是在合适的时机，解除引用关系。 使用弱引用<code>weakref</code>，<code>weakref</code>是Python提供的标准库，旨在解决循环引用。</li></ul> <h2 id="标记阶段-可达性分析算法"><a href="#标记阶段-可达性分析算法" class="header-anchor">#</a> 标记阶段：可达性分析算法</h2> <p>可达性分析算法，又可以被称为根搜索算法或追踪性垃圾收集。</p> <p>相对于引用计数算法而言，可达性分析算法不仅同样具备实现简单和执行高效等特点，更重要的是该算法可以<strong>有效地解决在引用计数算法中循环引用的问题，防止内存泄漏的发生</strong>。</p> <p>相较于引用计数算法，可达性分析算法就是Java、C#选择的判断对象存活的方式。这种类型的垃圾收集通常也叫作<strong>追踪性垃圾收集</strong>（Tracing Garbage Collection）。</p> <h3 id="基本思路"><a href="#基本思路" class="header-anchor">#</a> 基本思路</h3> <ul><li>可达性分析算法是以根对象集合（GCRoots，一组必须活跃的引用。）为起始点，按照从上至下的方式<strong>搜索被根对象集合所连接的目标对象是否可达</strong>。</li> <li>使用可达性分析算法后，内存中的存活对象都会被根对象集合直接或间接连接着，搜索所走过的路径称为<strong>引用链</strong>（Reference Chain）</li> <li>如果目标对象没有任何引用链相连，则是不可达的，就意味着该对象己经死亡，可以标记为垃圾对象。</li> <li><strong>在可达性分析算法中，只有能够被根对象集合直接或者间接连接的对象才是存活对象</strong>。</li></ul> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_3.png" alt="gc_algs_3"></p> <h3 id="gc-roots"><a href="#gc-roots" class="header-anchor">#</a> GC Roots</h3> <p>在Java语言中，<code>GC Roots</code>包括以下几类元素：</p> <ul><li>虚拟机栈中引用的对象
<ul><li>比如：各个线程被调用的方法中使用到的参数、局部变量等。</li></ul></li> <li>本地方法栈内JNI（通常说的本地方法）引用的对象</li> <li>方法区中类静态属性引用的对象
<ul><li>比如：Java类的引用类型静态变量</li></ul></li> <li>方法区中常量引用的对象
<ul><li>比如：字符串常量池（String Table）里的引用</li></ul></li> <li>所有被同步锁<code>synchronized</code>持有的对象</li> <li>Java虚拟机内部的引用。
<ul><li>基本数据类型对应的Class对象，一些常驻的异常对象（如：NullPointerException、OutOfMemoryError），系统类加载器。</li></ul></li> <li>反映Java虚拟机内部情况的<code>JMXBean</code>、<code>JVMTI</code>中注册的回调、本地代码缓存等。</li></ul> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_4.png" alt="gc_algs_4"></p> <p>除了这些固定的<code>GC Roots</code>集合以外，根据用户所选用的垃圾收集器以及当前回收的内存区域不同，还可以有其他对象“临时性”地加入，共同构成完整<code>GC Roots</code>集合，比如：分代收集和局部回收（Partial GC）。</p> <ul><li>如果只针对Java堆中的某一块区域进行垃圾回收（比如：典型的只针对新生代），必须考虑到内存区域是虚拟机自己的实现细节，更不是孤立封闭的，这个区域的对象完全有可能被其他区域的对象所引用，这时候就需要一并将关联的区域对象也加入<code>GCRoots</code>集合中去考虑，才能保证可达性分析的准确性。</li></ul> <p>小技巧：<strong>由于<code>Root</code>采用栈方式存放变量和指针，所以如果一个指针，它保存了堆内存里面的对象，但是自己又不存放在堆内存里面，那它就是一个<code>Root</code></strong>。</p> <p><strong>注意</strong>，如果要使用可达性分析算法来判断内存是否可回收，那么分析工作必须在一个能保障一致性的快照中进行，这点不满足的话分析结果的准确性就无法保证。这点也是导致GC进行时必须“stop The World”的一个重要原因。</p> <ul><li>即使是号称（几乎）不会发生停顿的CMS收集器中，枚举根节点时也是必须要停顿的。</li></ul> <h2 id="对象的finalization机制"><a href="#对象的finalization机制" class="header-anchor">#</a> 对象的finalization机制</h2> <p>Java语言提供了对象终止机制（finalization）来允许开发人员<strong>提供对象被销毁之前的自定义处理逻辑</strong>。</p> <p>当垃圾回收器发现没有引用指向一个对象，在回收此对象之前，总会先调用这个对象的<code>finalize()</code>方法。</p> <p><code>finalize()</code>方法允许在子类中被重写，<strong>用于在对象被回收时进行资源释放</strong>。通常在这个方法中进行一些资源释放和清理的工作，比如关闭文件、套接字和数据库连接等。</p> <p><strong>永远不要主动调用某个对象的<code>finalize()</code>方法，应该交给垃圾回收机制调用</strong>。理由包括下面三点：</p> <ul><li>在<code>finalize()</code>时<strong>可能会导致对象复活</strong>。</li> <li><code>finalize()</code>方法的<strong>执行时间是没有保障</strong>的，它完全由GC线程决定，极端情况下，若不发生GC，则<code>finalize()</code>方法将没有执行机会。</li> <li><strong>一个糟糕的<code>finalize()</code>会严重影响GC的性能</strong>。</li></ul> <p>从功能上来说，<code>finalize()</code>方法与C中的<code>析构函数</code>比较相似，但是Java采用的是基于垃圾回收器的自动内存管理机制，所以<code>finalize()</code>方法在本质上不同于C中的析构函数。</p> <p>由于<code>finalize()</code>方法的存在，<strong>虚拟机中的对象一般处于三种可能的状态</strong>。</p> <h3 id="生存还是死亡"><a href="#生存还是死亡" class="header-anchor">#</a> 生存还是死亡</h3> <p>如果从所有的根节点都无法访问到某个对象，说明对象己经不再使用了。一般来说，此对象需要被回收，但事实上，也并非是“非死不可”的，这时候它们暂时处于“缓刑”阶段。<strong>一个无法触及的对象有可能在某一个条件下“复活”自己</strong>，如果这样，那么对它的回收就是不合理的，为此，定义虚拟机中的对象可能的三种状态。如下：</p> <ul><li><strong>可触及的</strong>：从根节点开始，可以到达这个对象。</li> <li><strong>可复活的</strong>：对象的所有引用都被释放，但是对象有可能在<code>finalize()</code>中复活。</li> <li><strong>不可触及的</strong>：对象的<code>finalize()</code>被调用，并且没有复活，那么就会进入不可触及状态。不可触及的对象不可能被复活，<strong>因为<code>finalize()</code>只会被调用一次</strong>。</li></ul> <p>以上3种状态中，是由于<code>finalize()</code>方法的存在而进行的区分。总的来说，<strong>只有在对象不可触及时才可以被回收</strong>。</p> <h3 id="具体过程"><a href="#具体过程" class="header-anchor">#</a> 具体过程</h3> <p>判定一个对象<code>objA</code>是否可回收，<strong>至少要经历两次标记过程</strong>：</p> <ol><li>如果对象<code>objA</code>到<code>GC Roots</code>没有引用链，则进行第一次标记。</li> <li>进行筛选，判断此对象是否有必要执行<code>finalize()</code>方法</li> <li>如果对象<code>objA</code>没有重写<code>finalize()</code>方法，或者<code>finalize()</code>方法已经被虚拟机调用过，则虚拟机视为“没有必要执行”，<code>objA</code>被判定为不可触及的。</li> <li>如果对象<code>objA</code>重写了<code>finalize()</code>方法，且还未执行过，那么<code>objA</code>会被插入到<code>F-Queue</code>队列中，由一个虚拟机自动创建的、低优先级的**<code>Finalizer</code>线程**触发其<code>finalize()</code>方法执行。</li> <li><strong><code>finalize()</code>方法是对象逃脱死亡的最后机会，稍后<code>GC</code>会对<code>F-Queue</code>队列中的对象进行第二次标记</strong>。如果<code>objA</code>在<code>finalize()</code>方法中与引用链上的任何一个对象建立了联系，那么在第二次标记时，<code>objA</code>会被移出“即将回收”集合。之后，如果对象会再次出现没有引用存在的情况。在这个情况下，<code>finalize()</code>方法不会被再次调用，对象会直接变成不可触及的状态，也就是说，一个对象的finalize方法只会被调用一次。</li></ol> <p>举例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CanReliveObj</span> <span class="token punctuation">{</span>
    <span class="token comment">// 类变量，属于GC Roots的一部分</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CanReliveObj</span> canReliveObj<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;调用当前类重写的finalize()方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        canReliveObj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        canReliveObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CanReliveObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        canReliveObj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-----------------第一次gc操作------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 因为Finalizer线程的优先级比较低，暂停2秒，以等待它</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>canReliveObj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;obj is dead&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;obj is still alive&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-----------------第二次gc操作------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        canReliveObj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 下面代码和上面代码是一样的，但是 canReliveObj却自救失败了</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>canReliveObj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;obj is dead&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;obj is still alive&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>第一次gc操作<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
调用当前类重写的<span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法
obj is still alive
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>第二次gc操作<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
obj is dead
</code></pre></div><p>在第一次GC时，执行了<code>finalize</code>方法，但<code>finalize()</code>方法只会被调用一次，所以第二次该对象被GC标记并清除了。</p> <h2 id="mat与jprofiler的gc-roots溯源"><a href="#mat与jprofiler的gc-roots溯源" class="header-anchor">#</a> MAT与JProfiler的GC Roots溯源</h2> <h3 id="mat-概述"><a href="#mat-概述" class="header-anchor">#</a> MAT 概述</h3> <p><a href="http://www.eclipse.org/mat/" target="_blank" rel="noopener noreferrer">MAT<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是<code>Memory Analyzer</code>的简称，它是一款功能强大的Java堆内存分析器。用于查找内存泄漏以及查看内存消耗情况。</p> <p>MAT是基于<code>Eclipse</code>开发的，是一款免费的性能分析工具。</p> <h3 id="获取dump文件"><a href="#获取dump文件" class="header-anchor">#</a> 获取dump文件</h3> <h4 id="方式一-命令行使用-jmap"><a href="#方式一-命令行使用-jmap" class="header-anchor">#</a> 方式一：命令行使用 jmap</h4> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_5.png" alt="gc_algs_5"></p> <h4 id="方式二-使用jvisualvm导出"><a href="#方式二-使用jvisualvm导出" class="header-anchor">#</a> 方式二：使用JVisualVM导出</h4> <p>捕获的<code>heap dump</code>文件是一个临时文件，关闭JVisualVM后自动删除，若要保留，需要将其另存为文件。</p> <p>可通过以下方法捕获<code>heap dump</code>：</p> <ul><li>在左侧<code>Application</code>（应用程序）子窗口中右击相应的应用程序，选择<code>Heap Dump</code>（堆Dump）。</li> <li>在<code>Monitor</code>（监视）子标签页中点击<code>Heap Dump</code>（堆Dump）按钮。</li></ul> <p>本地应用程序的Heap dumps作为应用程序标签页的一个子标签页打开。同时，<code>heap dump</code>在左侧的<code>Application</code>（应用程序）栏中对应一个含有时间戳的节点。</p> <p>右击这个节点选择<code>save as</code>（另存为）即可将<code>heap dump</code>保存到本地。</p> <h3 id="使用mat打开dump文件"><a href="#使用mat打开dump文件" class="header-anchor">#</a> 使用MAT打开Dump文件</h3> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_6.png" alt="gc_algs_6"></p> <h3 id="jprofiler的gc-roots溯源"><a href="#jprofiler的gc-roots溯源" class="header-anchor">#</a> JProfiler的GC Roots溯源</h3> <p>我们在实际的开发中，一般不会查找全部的<code>GC Roots</code>，可能只是查找某个对象的整个链路，或者称为<strong>GC Roots溯源</strong>，这个时候我们就可以使用<code>JProfiler</code>。</p> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_7.png" alt="gc_algs_7"></p> <h2 id="清除阶段-标记-清除算法"><a href="#清除阶段-标记-清除算法" class="header-anchor">#</a> 清除阶段：标记-清除算法</h2> <p>当成功区分出内存中存活对象和死亡对象后，GC接下来的任务就是执行垃圾回收，释放掉无用对象所占用的内存空间，以便有足够的可用内存空间为新对象分配内存。</p> <p>目前在JVM中比较常见的三种垃圾收集算法是<strong>标记一清除算法（Mark-Sweep）、复制算法（copying）、标记-压缩算法（Mark-Compact）</strong>。</p> <p>标记-清除算法（Mark-Sweep）是一种非常基础和常见的垃圾收集算法，该算法被J.McCarthy等人在1960年提出并并应用于Lisp语言。</p> <h3 id="执行过程"><a href="#执行过程" class="header-anchor">#</a> 执行过程</h3> <p>当堆中的有效内存空间（available memory）被耗尽的时候，就会<strong>停止整个程序</strong>（也被称为stop the world），然后进行两项工作，<strong>第一项则是标记，第二项则是清除</strong>。</p> <ul><li>标记：Collector从引用根节点开始遍历，<strong>标记所有被引用的对象</strong>。一般是在对象的Header中记录为可达对象。</li> <li>清除：Collector对堆内存从头到尾<strong>进行线性的遍历</strong>，如果发现某个对象在其Header中没有标记为可达对象，则将其回收。</li></ul> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_8_mark_sweep.jpg" alt="gc_algs_8_mark_sweep"></p> <h3 id="空闲列表-free-list"><a href="#空闲列表-free-list" class="header-anchor">#</a> 空闲列表（Free List）</h3> <p>标记-清除算法是一种非移动式的回收算法，在进行清除后内存是不规整，有很多垃圾碎片，那么虚拟机就需要维护一个<strong>空闲列表</strong>（Free List）来为对象分配内存。</p> <h3 id="优缺点"><a href="#优缺点" class="header-anchor">#</a> 优缺点</h3> <p>优点：基础且简单</p> <p>缺点：</p> <ul><li>标记清除算法的<strong>效率不算高</strong></li> <li>在进行GC的时候，需要<strong>停止整个应用程序，用户体验较差</strong></li> <li>这种方式清理出来的空闲内存是不连续的，产生内碎片，需要维护一个<strong>空闲列表</strong></li></ul> <h3 id="何为清除"><a href="#何为清除" class="header-anchor">#</a> 何为清除</h3> <p>这里所谓的清除并不是真的置空，而是把需要清除的对象地址保存在空闲的地址列表里。下次有新对象需要加载时，判断垃圾的位置空间是否够，如果够，就存放覆盖原有的地址。</p> <h2 id="清除阶段-复制算法"><a href="#清除阶段-复制算法" class="header-anchor">#</a> 清除阶段：复制算法</h2> <p>为了解决标记-清除算法在垃圾收集效率方面的缺陷，M.L.Minsky于1963年发表了著名的论文，“使用双存储区的Lisp语言垃圾收集器CA LISP Garbage Collector Algorithm Using Serial Secondary Storage）”。M.L.Minsky在该论文中描述的算法被人们称为<strong>复制（Copying）算法</strong>，它也被M.L.Minsky本人成功地引入到了Lisp语言的一个实现版本中。</p> <h3 id="核心思想"><a href="#核心思想" class="header-anchor">#</a> 核心思想</h3> <p><strong>将活着的内存空间分为两块，每次只使用其中一块，在垃圾回收时将正在使用的内存中的存活对象复制到未被使用的内存块中，之后清除正在使用的内存块中的所有对象，交换两个内存的角色，最后完成垃圾回收</strong>。</p> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_8_copying.jpg" alt="gc_algs_8_copying"></p> <h3 id="优缺点-2"><a href="#优缺点-2" class="header-anchor">#</a> 优缺点</h3> <p>优点：</p> <ul><li>没有标记和清除过程，实现简单，运行高效。</li> <li>复制过去以后保证空间的连续性，不会出现“碎片”问题。</li></ul> <p>缺点：</p> <ul><li>此算法的缺点也是很明显的，就是需要两倍的内存空间。</li> <li>对于G1这种分拆成为大量<code>region</code>的GC，复制而不是移动，意味着GC需要维护<code>region</code>之间对象引用关系，不管是内存占用或者时间开销也不小。</li> <li><strong>复制算法的高效性是建立在存活对象少、垃圾对象多的前提下的</strong>。因为如果系统中的垃圾对象很多，那么复制算法需要复制的存活对象数量并不会太大，甚至非常低，那么它的效率就会很高。</li></ul> <h3 id="应用场景"><a href="#应用场景" class="header-anchor">#</a> 应用场景</h3> <p>在新生代，对常规应用的垃圾回收，一次通常可以回收<code>70% - 99%</code>的内存空间，回收性价比很高。所以现在的商业虚拟机都是用这种收集算法回收新生代。</p> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_9.png" alt="gc_algs_9"></p> <h2 id="清除阶段-标记-压缩-整理-算法"><a href="#清除阶段-标记-压缩-整理-算法" class="header-anchor">#</a> 清除阶段：标记-压缩（整理）算法</h2> <p>复制算法的高效性是建立在存活对象少、垃圾对象多的前提下的。这种情况在新生代经常发生，但是在老年代，更常见的情况是大部分对象都是存活对象。如果依然使用复制算法，由于存活对象较多，复制的成本也将很高。因此，基于老年代垃圾回收的特性，需要使用其他的算法。</p> <p>虽然标记一清除算法的确可以应用在老年代中，但是该算法不仅执行效率低下，而且在执行完内存回收后还会产生内存碎片，所以JVM的设计者需要在此基础之上进行改进，标记-压缩（Mark-Compact）算法由此诞生。</p> <p>1970年前后，G.L.Steele、C.J.Chene和D.s.Wise等研究者发布标记-压缩算法。在许多现代的垃圾收集器中，人们都使用了标记-压缩算法或其改进版本。</p> <h3 id="执行过程-2"><a href="#执行过程-2" class="header-anchor">#</a> 执行过程</h3> <ol><li>第一阶段和标记清除算法一样，从根节点开始标记所有被引用对象</li> <li>第二阶段将所有的存活对象压缩到内存的一端，按顺序排放。</li> <li>之后，清理边界外所有的空间。</li></ol> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_10.png" alt="gc_algs_10"></p> <p>标记-压缩算法的最终效果<strong>等同于标记-清除算法执行完成后，再进行一次内存碎片整理</strong>，因此，也可以把它称为标记-清除-压缩（Mark-Sweep-Compact）算法。</p> <p>二者的本质差异在于<strong>标记-清除算法是一种非移动式的回收算法，而标记-压缩则是移动式的</strong>。是否移动回收后的存活对象是一项优缺点并存的风险决策。可以看到，标记的存活对象将会被整理，按照内存地址依次排列，而未被标记的内存会被清理掉。如此一来，当我们需要给新对象分配内存时，JVM只需要持有一个内存的起始地址即可，这比维护一个空闲列表显然少了许多开销。</p> <h3 id="指针碰撞-bump-the-pointer"><a href="#指针碰撞-bump-the-pointer" class="header-anchor">#</a> 指针碰撞（Bump the Pointer）</h3> <p>如果内存空间以规整和有序的方式分布，即已用和未用的内存都各自一边，彼此之间维系着一个记录下一次分配起始点的标记指针，当为新对象分配内存时，只需要通过修改指针的偏移量将新对象分配在第一个空闲内存位置上，这种分配方式就叫做指针碰撞（Bump tHe Pointer）。</p> <h3 id="优缺点-3"><a href="#优缺点-3" class="header-anchor">#</a> 优缺点</h3> <p>优点</p> <ul><li>消除了标记-清除算法当中，内存区域分散的缺点，我们需要给新对象分配内存时，JVM只需要持有一个内存的起始地址即可。</li> <li>消除了复制算法当中，内存减半的高额代价。</li></ul> <p>缺点</p> <ul><li>从效率上来说，标记-整理算法要低于复制算法。</li> <li>移动对象的同时，如果对象被其他对象引用，则还需要调整引用的地址</li> <li>移动过程中，需要全程暂停用户应用程序，即：STW。</li></ul> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <table><thead><tr><th></th> <th>Mark-Sweep</th> <th>Mark-Compact</th> <th>Copying</th></tr></thead> <tbody><tr><td><strong>速率</strong></td> <td>中等</td> <td>最慢</td> <td>最快</td></tr> <tr><td><strong>空间开销</strong></td> <td>少（但会堆积碎片）</td> <td>少（不堆积碎片）</td> <td>通常需要活对象的2倍空间（不堆积碎片）</td></tr> <tr><td><strong>移动对象</strong></td> <td>否</td> <td>是</td> <td>是</td></tr></tbody></table> <p>效率上来说，复制算法是当之无愧的老大，但是却浪费了太多内存。</p> <p>而为了尽量兼顾上面提到的三个指标，标记-整理算法相对来说更平滑一些，但是效率上不尽如人意，它比复制算法多了一个标记的阶段，比标记-清除多了一个整理内存的阶段</p> <p>难道就没有一种最优算法吗？</p> <ul><li><strong>无，没有最好的算法，只有最合适的算法</strong>。</li></ul> <h2 id="分代收集算法"><a href="#分代收集算法" class="header-anchor">#</a> 分代收集算法</h2> <p>前面所有这些算法中，并没有一种算法可以完全替代其他算法，它们都具有自己独特的优势和特点。那么，<strong>结合运行时数据区对象的生命周期以及算法的优势和替代，分代收集算法应运而生</strong>。</p> <p>分代收集算法，也就是基于这样一个事实：<strong>不同的对象的生命周期是不一样的</strong>。因此，不同生命周期的对象可以采取不同的收集方式，以便提高回收效率。而我们知道Java堆一般是分为新生代和老年代，这样就可以根据各个年代的特点使用不同的回收算法，以提高垃圾回收的效率。</p> <p>在Java程序运行的过程中，会产生大量的对象，其中有些对象是与业务信息相关，比如Http请求中的<code>Session</code>对象、线程、<code>Socket</code>连接，这类对象跟业务直接挂钩，因此生命周期比较长。但是还有一些对象，主要是程序运行过程中生成的临时变量，这些对象生命周期会比较短，比如：<code>String</code>对象，由于其类的不变特性，系统会产生大量的这些对象，但是有些对象甚至只用一次即可回收。</p> <p>目前几乎所有的GC都采用分代收集算法执行垃圾回收的。在HotSpot中，基于分代的概念，GC所使用的内存回收算法必须结合年轻代和老年代各自的特点，具体如下：</p> <h3 id="年轻代-young-gen"><a href="#年轻代-young-gen" class="header-anchor">#</a> 年轻代（Young Gen）</h3> <p>年轻代特点：区域相对老年代较小，对象生命周期短、存活率低，回收频繁。</p> <p><strong>这种情况复制算法的回收整理，速度是最快的</strong>。复制算法的效率只和当前存活对象大小有关，因此很适用于年轻代的回收。而复制算法内存利用率不高的问题，通过<code>HotSpot</code>中的两个<code>survivor</code>的设计得到缓解。</p> <h3 id="老年代-tenured-gen"><a href="#老年代-tenured-gen" class="header-anchor">#</a> 老年代（Tenured Gen）</h3> <p>老年代特点：区域较大，对象生命周期长、存活率高，回收不及年轻代频繁。</p> <p>这种情况存在大量存活率高的对象，复制算法明显变得不合适。一般是<strong>由标记-清除或者是标记-清除与标记-整理的混合实现</strong>。</p> <ul><li>Mark阶段的开销与存活对象的数量成正比。</li> <li>Sweep阶段的开销与所管理区域的大小成正相关。</li> <li>Compact阶段的开销与存活对象的数据成正比。</li></ul> <p>以<code>HotSpo</code>t中的<code>CMS</code>回收器为例，<code>CMS</code>是基于Mark-Sweep实现的，对于对象的回收效率很高。而对于碎片问题，CMS采用基于Mark-Compact算法的<code>Serial Old</code>回收器作为补偿措施：当内存回收不佳（碎片导致的<code>Concurrent Mode Failure</code>时），将采用<code>Serial Old</code>执行<code>Full GC</code>以达到对老年代内存的整理。</p> <p>分代的思想被现有的虚拟机广泛使用，几乎所有的垃圾回收器都区分新生代和老年代。</p> <h2 id="增量收集算法"><a href="#增量收集算法" class="header-anchor">#</a> 增量收集算法</h2> <p>上述现有的算法，在垃圾回收过程中，应用软件将处于一种<code>Stop the World</code>的状态。在<code>Stop the World</code>状态下，应用程序所有的线程都会挂起，暂停一切正常的工作，等待垃圾回收的完成。<strong>如果垃圾回收时间过长，应用程序会被挂起很久，将严重影响用户体验或者系统的稳定性</strong>。为了解决这个问题，即对实时垃圾收集算法的研究直接导致了增量收集（Incremental Collecting）算法的诞生。</p> <h3 id="基本思想"><a href="#基本思想" class="header-anchor">#</a> 基本思想</h3> <p>如果一次性将所有的垃圾进行处理，会造成系统长时间的停顿，那么就可以让垃圾收集线程和应用程序线程交替执行（并发）。<strong>垃圾收集线程每次只收集一小片区域的内存空间，接着切换到应用程序线程。依次反复，直到垃圾收集完成。</strong></p> <p>总的来说，增量收集算法的基础仍是传统的标记-清除和复制算法。<strong>增量收集算法通过对线程间冲突的妥善处理，允许垃圾收集线程以分阶段的方式完成标记、清理或复制工作</strong>。</p> <h3 id="优缺点-4"><a href="#优缺点-4" class="header-anchor">#</a> 优缺点</h3> <p>使用这种方式，由于在垃圾回收过程中，间断性地还执行了应用程序代码，所以<strong>能减少系统的停顿时间</strong>。但是，因为线程切换和上下文转换的消耗，会使得垃圾回收的总体成本上升，<strong>造成系统吞吐量的下降</strong>。</p> <h2 id="分区算法"><a href="#分区算法" class="header-anchor">#</a> 分区算法</h2> <p>一般来说，在相同条件下，堆空间越大，一次GC时所需要的时间就越长，有关GC产生的停顿也越长。为了更好地控制GC产生的停顿时间，将一块大的内存区域分割成多个小块，<strong>根据目标的停顿时间，每次合理地回收若干个小区间，而不是整个堆空间，从而减少一次GC所产生的停顿</strong>。</p> <p>分代算法是将按照对象的生命周期长短划分成两个部分，而分区算法将整个堆空间划分成连续的不同小区间，每个小区间都有自己的生命周期，每一个小区间都独立使用，独立回收。这种算法的好处是可以控制一次回收多少个小区间，从而达到目标停顿时间的效果。</p> <p>目前，采用这种算法的垃圾收集器有G1、ZGC等。</p> <p><img src="https://qiniu.wenwl.site/notes/jvm/gc_algs_11.png" alt="gc_algs_11"></p> <p>注意，以上只是基本的算法思路，实际GC实现过程要复杂的多，<strong>目前还在发展中的前沿GC都是复合算法，并且并行和并发兼备</strong>。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">3/8/2022, 9:09:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/java-vm/1_16_gc_collector.html">
        垃圾收集器
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bc037eca.js" defer></script><script src="/assets/js/3.a3373ef9.js" defer></script><script src="/assets/js/165.f904d36e.js" defer></script>
  </body>
</html>
